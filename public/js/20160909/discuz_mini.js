if("undefined"==typeof DiscuzMini||"object"!=typeof DiscuzMini)var DiscuzMini={qw:"",searchSource:"",parseURL:function(d){var a=document.createElement("a");a.href=d;for(var b=a.protocol.replace(":",""),g=a.hostname,e=a.port,c=a.search,i={},a=a.search.replace(/^\?/,"").split("&"),k=a.length,j=0,f;j<k;j++)a[j]&&(f=a[j].split("="),i[f[0]]=f[1]);return{source:d,protocol:b,host:g,port:e,query:c,params:i}},css:function(d){try{document.createStyleSheet(d)}catch(a){var b=document.createElement("link");b.rel=
"stylesheet";b.type="text/css";b.href=d;document.getElementsByTagName("head")[0].appendChild(b)}},div:function(d){if(!document.getElementById(d)){var a=document.createElement("div");a.id=d;document.body.appendChild(a)}},showMini:function(d,a){var d=d.replace(/&amp;/g,"&"),b=this.parseURL(d),g=this,e=function(c){if("undefined"!=typeof c.errorCode&&0!=c.errorCode)return!1;if("undefined"!=typeof c.result&&c.result&&(c=c.result,"undefined"!=typeof c.threadItems&&c.threadItems)){g.div("discuz_mini");g.css("http://discuz.gtimg.cn/search/styles/discuz_mini.css?v=1");
g.qw=c.extraItems.keywordsEncode;var b=[];b.push('<div class="minipage" id="div_minipage"><div class="minipage_con cl"><ul class="minipage_result">');var d=1,e="",f;for(f in c.threadItems)e=
c.threadItems[f].url,b.push('<li><i class="dot">&#65294;</i><a href="'+e+'" target="_blank" title="'+c.threadItems[f].plainSubject+'" onclick="javascript:DiscuzMini.uploadMiniPageAction('+a.s_id+", "+d++ +', 1, this);"><nowrap>'+c.threadItems[f].subject+"</nowrap></a></li>");b.push('</ul><div class="minipage_more"><a href="'+c.extraItems.searchURL+"&q="+c.extraItems.keywordsEncode+"&sId="+a.s_id+'&menu=1&rfh=1&qs=search.more" target="_blank">+ &#26356;&#22810;"<em>'+c.extraItems.keywords+'</em>"&#30456;&#20851;&#24086;&#23376;</a></div>');
if("undefined"!=typeof c.hintItems&&c.hintItems){b.push('<ul class="minipage_hint cl">');for(var h in c.hintItems)b.push('<li><a href="'+c.extraItems.searchURL+"&q="+encodeURIComponent(c.hintItems[h])+"&sId="+a.s_id+'&menu=1&rfh=1&qs=word.hint.se" target="_blank" title="'+c.hintItems[h]+'">'+c.hintItems[h]+"</a></li>");b.push("</ul>")}b.push('</div><a href="javascript:;" id="a_min" class="minipage_btn_min" title="&#26368;&#23567;&#21270;" onclick="DiscuzMini.minimizeMinipage(' + a.s_id + ');return false;"><span>&#26368;&#23567;&#21270;</span></a><a style="display: none;" href="javascript:;" id="a_max" class="minipage_btn_max" title="&#26368;&#22823;&#21270;" onmouseover="DiscuzMini.maximizeMinipage(' + a.s_id + ');return false;"><span>&#26368;&#22823;&#21270;</span></a></div>');document.getElementById("discuz_mini").innerHTML=b.join("");window.ActiveXObject&&!window.XMLHttpRequest&&document.getElementById("div_minipage")&&(f=document.createElement("script"),document.getElementById("div_minipage").appendChild(f),f.src="http://discuz.gtimg.cn/search/scripts/win.js",setTimeout(function(){showMyNoticeWindow("div_minipage")},
500));"function"==typeof pgvMain?pgvMain({discuzParams:{r2:82},virtualDomain:"discuz.qq.com",extraParams:"",statIframe:!0}):(f=document.createElement("script"),document.getElementById("div_minipage").appendChild(f),f.src="http://tcss.qq.com/ping.js?v=1",setTimeout(function(){pgvMain({discuzParams:{r2:82},virtualDomain:"discuz.qq.com",extraParams:"",statIframe:!0})},500))}};a.q="";a.charset="UTF-8";if(arr=/([^\.]+\.)+?([^\.]+)(\.(com|cn))+/g.exec(b.host))this.searchSource=arr[2];switch(b.host){case "www.google.com":case "www.google.com.hk":case "cn.bing.com":case "www.bing.com":case "www.ask.com":case "www.youdao.com":case "www.yahoo.cn":case "one.cn.yahoo.com":a.q=
b.params.q;break;case "search.yahoo.com":a.q=b.params.p;break;case "www.baidu.com":a.charset="GBK";a.q=b.params.wd;b.params.ie&&(a.charset=b.params.ie);break;case "so.360.cn":case "www.360sou.com":this.searchSource="360";a.q=b.params.q;b.params.ie&&(a.charset=b.params.ie);break;case "www.soso.com":a.q=b.params.w;a.charset="GBK";break;case "www.sogou.com":a.q=b.params.query;a.charset="GBK";break;case "www.gougou.com":a.q=b.params.search;break;default:a.q=""}if(a.q){if(arr=/^http(s)?:\/\//g.exec(a.q))return!1;
this.JSONP.get("http://search.discuz.qq.com/api/site/mini",a,e)}},closeMinipage:function(d){this.uploadMiniPageAction(d,1,3,"");document.getElementById("div_minipage").style.display="none"},uploadMiniPageAction:function(d,a,b,g){var e="",c="";1==b?(c=g.href,e="miniList"):2==b?(c=document.location,e="miniSize"):3==b?(c=document.location,e="miniClose"):4==b&&(c=document.location,e="maxSize");d="http://search.discuz.qq.com/f/url?sId="+d+"&page=1&q="+encodeURIComponent(this.qw)+"&qs=&url="+encodeURIComponent(c)+
"&position="+a+"&type="+e+"&searchSource="+this.searchSource;a=document.getElementsByTagName("head")[0];b=document.createElement("script");b.src=d;a.appendChild(b)},minimizeMinipage:function(d){this.uploadMiniPageAction(d,1,2,"");var d=document.getElementById("div_minipage"),a=d.clientHeight;d.className+=" minipage_min";document.getElementById("a_min").style.display="none";document.getElementById("a_max").style.display="block";if(window.ActiveXObject&&!window.XMLHttpRequest)try{var b=parseInt(d.style.top)+
(a-42);d.style.top=(0>b?0:b)+"px"}catch(g){}},maximizeMinipage:function(d){this.uploadMiniPageAction(d,1,4,"");var d=document.getElementById("div_minipage"),a=d.className;"string"==typeof a&&(d.className=a.replace(" minipage_min",""));document.getElementById("a_min").style.display="block";document.getElementById("a_max").style.display="none";if(window.ActiveXObject&&!window.XMLHttpRequest)try{var b=parseInt(d.style.top)-(d.clientHeight-42);d.style.top=(0>b?0:b)+"px"}catch(g){}}};
DiscuzMini.JSONP=function(){var d,a,b,g=this;return{get:function(e,c,i){a=-1<e.indexOf("?")?"&":"?";c=c||{};for(b in c)c.hasOwnProperty(b)&&(a+=encodeURIComponent(b)+"="+encodeURIComponent(c[b])+"&");g.discuzMiniCallback=function(a){i(a);try{delete g.discuzMiniCallback}catch(b){}g.discuzMiniCallback=null};e=e+a+"callback=discuzMiniCallback";script=document.createElement("script");done=!1;script.src=e;script.charset="UTF-8";script.async=!0;script.onload=script.onreadystatechange=function(){if(!done&&
(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState))done=!0,script.onload=script.onreadystatechange=null,script&&script.parentNode&&script.parentNode.removeChild(script)};d||(d=document.getElementsByTagName("head")[0]);d.appendChild(script);return"discuzMiniCallback"}}}();
